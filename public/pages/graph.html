<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <link rel="apple-touch-icon" sizes="76x76" href="../assets/img/apple-icon.png">
  <link rel="icon" type="image/png" href="../assets/img/cb-icon.png">
  <title>
    ClimBox - Gafik
  </title>
  <!--     Fonts and icons     -->
  <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Inter:300,400,500,600,700,900" />
  <!-- Nucleo Icons -->
  <link href="../assets/css/nucleo-icons.css" rel="stylesheet" />
  <link href="../assets/css/nucleo-svg.css" rel="stylesheet" />
  <!-- Font Awesome Icons -->
  <script src="https://kit.fontawesome.com/42d5adcbca.js" crossorigin="anonymous"></script>
  <!-- Material Icons -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@24,400,0,0" />
  <!-- CSS Files -->
  <link id="pagestyle" href="../assets/css/material-dashboard.css?v=3.2.0" rel="stylesheet" />


  <style>
    body { background:#f0f3f6; font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial; }
    .card { border: 0; border-radius: 10px; box-shadow: 0 2px 6px rgba(12,20,28,0.06); }
    .card .small-chip { font-size: 0.7rem; padding: 0.2rem 0.45rem; border-radius: 999px; background: rgba(255,255,255,0.7); }
    /* custom card colors */
    .card-satellite { background: linear-gradient(180deg,#d9f46b,#bfe64f); color:#0b1a13; }
    .card-buoy { background: linear-gradient(180deg,#c9e6ff,#1976d2); color:#fff; }
    .card-alert { background: linear-gradient(180deg, #ffecd2, #fcb69f); }
    .card-wind { background: linear-gradient(180deg, #a8edea, #d7d6fe); color:#21303a; }

    /* small visuals */
    .bar-strip { display:flex; gap:4px; margin-top:5rem; }
    .bar-strip > div { height:8px; border-radius:3px; flex:1; }
    .chip-live { background:#e6f7ff; color:#036; font-weight:700; padding: .25rem .5rem; border-radius:999px;   justify-content: center; align-items: center; }

    /* responsive tweaks */
    .card .title { font-weight:700; font-size:.75rem; letter-spacing:.04em; }
    .big-n { font-size:2.25rem; font-weight:800; line-height:1; }
    .muted { color: #252525; font-size:.85rem; }

    /* donut center text */
    .donut-center { font-weight:700; font-size:1rem; text-align:center; }

    .responsive-chart {
  position: relative;
  aspect-ratio: 16 / 8.8;
}

@media (max-width: 768px) {
  .responsive-chart {
    aspect-ratio: 1 / 1;
  }
}

  </style>
</head>

<body class="g-sidenav-show  bg-gray-100">
 <aside class="sidenav navbar navbar-vertical navbar-expand-xs border-radius-lg fixed-start ms-2  bg-white my-2" id="sidenav-main">
  <div class="sidenav-header">
    <i class="fas fa-times p-3 cursor-pointer text-dark opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
    <a class="navbar-brand px-4 py-3 m-0" href=" ../pages/dashboard.html " >
      <img src="../assets/img/cb-icon.png" class="navbar-brand-img" width="26" height="26" alt="main_logo">
      <span class="ms-1 text-sm fw-bold">
        <span style="color: rgb(0, 0, 0);">Clim</span><span style="color: #00A8E8;">Box</span>
      </span>
    </a>
  </div>
    <hr class="horizontal dark mt-0 mb-2">
    <div class="collapse navbar-collapse  w-auto " id="sidenav-collapse-main">
      <ul class="navbar-nav">
        <li class="nav-item">
 <a class="nav-link text-dark" href="dashboard.html">
            <i class="material-symbols-rounded opacity-5">dashboard</i>
            <span class="nav-link-text ms-1">Dashboard</span>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link text-dark" href="map.html">
          <i class="material-symbols-rounded opacity-5">map</i>
          <span class="nav-link-text ms-1">Map</span>
        </a>
      </li>
        <li class="nav-item">
          <a class="nav-link active bg-info text-white" href="graph.html">
            <i class="material-symbols-rounded opacity-5">table_view</i>
            <span class="nav-link-text ms-1">Grafik</span>
          </a>
        </li>

        <!-- <li class="nav-item"> -->
 <!-- <a class="nav-link text-dark" href="virtual-reality.html">
            <i class="material-symbols-rounded opacity-5">view_in_ar</i>
            <span class="nav-link-text ms-1">Virtual Reality</span>
          </a>
        </li>
        <li class="nav-item">
 <a class="nav-link text-dark" href="rtl.html">
            <i class="material-symbols-rounded opacity-5">format_textdirection_r_to_l</i>
            <span class="nav-link-text ms-1">RTL</span>
          </a>
        </li>
        <li class="nav-item">
 <a class="nav-link text-dark" href="notifications.html">
            <i class="material-symbols-rounded opacity-5">notifications</i>
            <span class="nav-link-text ms-1">Notifications</span>
          </a>
        </li> -->
        <li class="nav-item mt-3">
          <h6 class="ps-4 ms-2 text-uppercase text-xs text-dark font-weight-bolder opacity-5">Account pages</h6>
        </li>
        <li class="nav-item">
 <a class="nav-link text-dark" href="profile.html">
            <i class="material-symbols-rounded opacity-5">person</i>
            <span class="nav-link-text ms-1">Profile</span>
          </a>
        </li>
        <li class="nav-item">
 <a class="nav-link text-dark" href="sign-in.html">
            <i class="material-symbols-rounded opacity-5">login</i>
            <span class="nav-link-text ms-1">Sign In</span>
          </a>
        </li>
        <li class="nav-item">
 <a class="nav-link text-dark" href="sign-up.html">
            <i class="material-symbols-rounded opacity-5">assignment</i>
            <span class="nav-link-text ms-1">Sign Up</span>
          </a>
        </li>
      </ul>
    </div>
    <div class="sidenav-footer position-absolute w-100 bottom-0 ">
      <div class="mx-3">
        <a class="btn bg-dark text-white mt-4 w-100" 
          href="https://github.com/the3rdchild/climbox-project" 
          target="_blank" 
          rel="noopener noreferrer" 
          type="button">
          Github
        </a>
        <!-- <a class="btn bg-gradient-dark w-100" href="https://www.creative-tim.com/product/material-dashboard-pro?ref=sidebarfree" type="button">Upgrade to pro</a> -->
      </div>
    </div>
  </aside>
  <main class="main-content position-relative max-height-vh-100 h-100 border-radius-lg ">
    <!-- Navbar -->
    <nav class="navbar navbar-main navbar-expand-lg px-0 mx-3 shadow-none border-radius-xl" id="navbarBlur" data-scroll="true">
      <div class="container-fluid py-1 px-3">
        <nav aria-label="breadcrumb">
          <ol class="breadcrumb bg-transparent mb-0 pb-0 pt-1 px-0 me-sm-6 me-5">
            <li class="breadcrumb-item text-sm"><a class="opacity-5 text-dark" href="../pages/map.html">Map</a></li>
            <li class="breadcrumb-item text-sm text-dark active" aria-current="page">Tables</li>
          </ol>
        </nav>
        <div class="collapse navbar-collapse mt-sm-0 mt-2 me-md-0 me-sm-4" id="navbar">
          <div class="ms-md-auto pe-md-3 d-flex align-items-center">
            <!-- <div class="input-group input-group-outline">
              <label class="form-label">Type here...</label>
              <input type="text" class="form-control">
            </div> -->
          </div>
          <ul class="navbar-nav d-flex align-items-center  justify-content-end">
            <li class="nav-item d-flex align-items-center">
<!-- <a class="btn btn-outline-primary btn-sm mb-0 me-3" target="_blank" href="https://www.creative-tim.com/builder?ref=navbar-material-dashboard">Online Builder</a> -->
</li>
            <!-- <li class="mt-1">
              <a class="github-button" href="https://github.com/creativetimofficial/material-dashboard" data-icon="octicon-star" data-size="large" data-show-count="true" aria-label="Star creativetimofficial/material-dashboard on GitHub">Star</a>
            </li> -->
            <li class="nav-item d-xl-none ps-3 d-flex align-items-center" style="margin-top: -1.5mm; margin-right: 5mm;">
              <a href="javascript:;" class="nav-link text-body p-0" id="iconNavbarSidenav">
                <div class="sidenav-toggler-inner">
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                  <i class="sidenav-toggler-line"></i>
                </div>
              </a>
            </li>
            <!-- <li class="nav-item px-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0">
                <i class="material-symbols-rounded fixed-plugin-button-nav">settings</i>
              </a>
            </li> -->
            <!--Notification start -->
            <li class="nav-item dropdown pe-3 d-flex align-items-center">
              <a href="javascript:;" class="nav-link text-body p-0" id="dropdownMenuButton" data-bs-toggle="dropdown" aria-expanded="false">
                <i class="material-symbols-rounded">notifications</i>
              </a>
              <ul class="dropdown-menu  dropdown-menu-end  px-2 py-3 me-sm-n4" aria-labelledby="dropdownMenuButton">
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src="../assets/img/notifications/danger.png" class="avatar avatar-sm  me-3 ">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold">Danger</span> Lokasi A: Overheat
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          13 minutes ago
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src="../assets/img/notifications/warning.png" class="avatar avatar-sm  me-3 ">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold">Warning</span> Lokasi A: Threshold 
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          1 day
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="mb-2">
                  <a class="dropdown-item border-radius-md" href="javascript:;">
                    <div class="d-flex py-1">
                      <div class="my-auto">
                        <img src="../assets/img/notifications/notification.png" class="avatar avatar-sm  me-3 ">
                      </div>
                      <div class="d-flex flex-column justify-content-center">
                        <h6 class="text-sm font-weight-normal mb-1">
                          <span class="font-weight-bold">Notifications</span> Logged-in 
                        </h6>
                        <p class="text-xs text-secondary mb-0">
                          <i class="fa fa-clock me-1"></i>
                          1 day
                        </p>
                      </div>
                    </div>
                  </a>
                </li>
              </ul>
            </li>
            <!--Notification end -->
            
            <li class="nav-item d-flex align-items-center">
                <a href="sign-in.html" class="nav-link text-body font-weight-bold px-0">
                <i class="material-symbols-rounded">account_circle</i>
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- End Navbar -->

    <!-- Main -->
    <div class="row h-100">
      <!-- Map (6/12) -->
      <div class="col-12 col-xl-6 h-90 p-0">
        <div id="map" style="width:100%; height:100%;"></div>
      </div>
      
      <!-- Chart + list (6/12) -->
      <div class="col-12 col-xl-6 h-50 d-flex flex-column">
        <!-- Chart -->
        <span class="font-weight-bold" style="margin-left: 20px; text-align: center;">
          Pulau Komodo
        </span>
        <div class="flex-grow-1 p-3 responsive-chart">
          <canvas id="chart" style="width:100%; height:100%;"></canvas>
        </div>        
        <!-- List lokasi di bawah chart -->
      </div>
    </div>
    <!-- End Main -->

        <!-- Grid graph -->
      <div class="container-fluid py-4">
      <div class="row g-3">
    <!-- 1: Meteorologi -->
      <div class="col-12 col-md-4 col-lg-2">
        <div class="card card-satellite h-100" data-group="meteorologi">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="title">METEOROLOGI</div>
                <div class="big-n">--</div>
              </div>
              <div class="small-chip">LIVE</div>
            </div>
  
            <hr style="border-color: rgba(0,0,0,0.06)">
  
            <div class="row">
              <div class="col-6">
                <div class="muted">WIND</div>
                <div class="h6 mb-0 field-surface-temp">--</div>
              </div>
              <div class="col-6">
                <div class="muted">TEMP</div>
                <div class="h6 mb-0 field-historical-max">--</div>
              </div>
            </div>
  
            <div class="mt-3">
              <div class="muted">NOTES</div>
              <div class="fw-bold field-note">--</div>
            </div>

            <div class="bar-strip" aria-hidden="true">
              <div style="background:#1b7e5a;"></div>
              <div style="background:#2aa84f;"></div>
              <div style="background:#ffd166;"></div>
              <div style="background:#ffb545;"></div>
              <div style="background:#d84f4f;"></div>
              <div style="background:#6b1818;"></div>
            </div>
          </div>
        </div>
      </div>

    <!-- 2: Presipitasi -->
      <div class="col-12 col-md-4 col-lg-2">
        <div class="card card-buoy h-100" data-group="presipitasi">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <div class="title text-dark">PRESIPITASI</div>
              <div class="small-chip">LIVE</div>
            </div>
  
            <div class="mt-2">
              <div class="big-n h3 mb-0 bold">--</div>
              <div class="muted">Current</div>
            </div>
  
            <hr style="border-color: rgba(255,255,255,0.14)">
  
            <div class="mt-2">
              <div class="h2 mb-0 field-alt">--</div>
              <div class="muted">Secondary</div>
            </div>
  
            <div class="group-metrics mt-3"></div>
  
            <div class="muted mt-2 last-updated">Last data received: --</div>

            <div class="d-flex justify-content-center align-items-end" style="height:100px; margin-top: 25px;">
              <!-- simple buoy illustration -->
              <svg width="120" height="80" viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="buoy">
                <rect x="10" y="40" width="100" height="10" rx="4" fill="rgba(255,255,255,0.08)"></rect>
                <rect x="54" y="18" width="12" height="22" rx="2" fill="#fff"></rect>
                <circle cx="60" cy="46" r="10" fill="#fff" opacity="0.9"></circle>
              </svg>
            </div>
          </div>
        </div>
      </div>

    <!-- 3: Heat Stress / Kualitas Fisika -->
      <div class="col-12 col-md-4 col-lg-2">
        <div class="card card-alert h-100" data-group="kualitas_fisika">
          <div class="card-body">
            <div class="title text-dark">KUALITAS FISIKA</div>

            <div class="d-flex align-items-center mt-3">
              <!-- donut SVG -->
              <svg width="300" height="150" viewBox="0 0 42 42" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
                <circle r="15.9155" cx="21" cy="21" fill="transparent" stroke="#f0f4f8" stroke-width="8"></circle>
                <circle r="15.9155" cx="21" cy="21" fill="transparent" stroke="#ffd166" stroke-width="8" stroke-dasharray="25 75" stroke-dashoffset="25" transform="rotate(-90 21 21)"></circle>
                <circle r="15.9155" cx="21" cy="21" fill="transparent" stroke="#ff6b6b" stroke-width="8" stroke-dasharray="20 80" stroke-dashoffset="-5" transform="rotate(-50 21 21)"></circle>
              </svg>
            </div> 
            <div class="d-flex align-items-center mt-3">
              <div class="ms-3">
                <div class="h6 mb-0">KEY</div>
                <div class="h3 display-6 fw-bold big-n">--</div>
                <div class="muted last-updated">Last data received: --</div>
              </div>
            </div>
          </div>
        </div>
      </div>

    <!-- 4: Kualitas Kimia Dasar -->
      <div class="col-12 col-md-4 col-lg-2">
        <div class="card card-wind h-100" data-group="kualitas_kimia_dasar">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
              <div class="title">KUALITAS KIMIA DASAR</div>
              <div class="small-chip">LIVE</div>
            </div>

            <div class="mt-2">
              <div class="big-n">--</div>
              <div class="muted">Main metric</div>
            </div>

            <hr>

            <div class="d-flex">
              <div>
                <div class="muted">Detail A</div>
                <div class="mb-1 field-detail-a">--</div>
                <div class="muted">Detail B</div>
              </div>

              <div class="ms-auto">
                <!-- wave avatar -->
                <svg width="80" height="80" viewBox="0 0 24 24" fill="none" role="img" aria-label="waves">
                  <path d="M2 12c4-4 6 0 10 0s6-4 10-4" stroke="#7f8c8d" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round"></path>
                </svg>
              </div>
            </div>

            <div class="group-metrics mt-3"></div>
            <div class="muted mt-2 last-updated" style="margin-top: 20px;">Last data received: --</div>
  
          </div>
        </div>
      </div>
    <!-- 5: Kualitas Kimia Lanjut -->
      <div class="col-12 col-md-4 col-lg-2">
        <div class="card card-satellite h-100" data-group="kualitas_kimia_lanjut">
          <div class="card-body">
            <div class="d-flex justify-content-between align-items-start">
              <div>
                <div class="title">KUALITAS KIMIA LANJUT</div>
                <div class="big-n">--</div>
              </div>
              <div class="small-chip">LIVE</div>
            </div>

            <hr style="border-color: rgba(0,0,0,0.06)">

            <div class="row">
              <div class="col-6">
                <div class="muted">PRIMARY</div>
                <div class="h6 mb-0 field-primary">--</div>
              </div>
              <div class="col-6">
                <div class="muted">SECOND</div>
                <div class="h6 mb-0 field-secondary">--</div>
              </div>
            </div>

            <div class="mt-3">
              <div class="group-metrics mt-3"></div>
              <div class="muted mt-2 last-updated">Last data received: --</div>
            </div>

            <div class="bar-strip" aria-hidden="true">
              <div style="background:#1b7e5a;"></div>
              <div style="background:#2aa84f;"></div>
              <div style="background:#ffd166;"></div>
              <div style="background:#ffb545;"></div>
              <div style="background:#d84f4f;"></div>
              <div style="background:#6b1818;"></div>
            </div>
          </div>
        </div>
      </div>

    <!-- 6: Kualitas Turbiditas -->
      <div class="col-12 col-md-4 col-lg-2">
        <div class="card card-buoy h-100" data-group="kualitas_turbiditas">
          <div class="card-body">
            <div class="d-flex justify-content-between">
              <div class="title text-dark">KUALITAS TURBIDITAS</div>
              <div class="small-chip text-dark">LIVE</div>
            </div>

            <div class="mt-2">
              <div class="big-n h3 mb-0 bold">--</div>
              <div class="muted">Main</div>
            </div>

            <div class="d-flex justify-content-between">

            </div>
          
            <hr style="border-color: rgba(255,255,255,0.14)">

            <div class="mt-2">
              <div class="h2 mb-0 field-depth">--</div>
              <div class="muted">Detail</div>
            </div>

            <div class="group-metrics mt-3"></div>
            <div class="muted mt-2 last-updated">Last data received: --</div>
  
            <div class="d-flex justify-content-center align-items-end" style="height:100px; margin-top: 25px;">
              <!-- simple buoy illustration -->
              <svg width="120" height="80" viewBox="0 0 120 80" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="buoy">
                <rect x="10" y="40" width="100" height="10" rx="4" fill="rgba(255,255,255,0.08)"></rect>
                <rect x="54" y="18" width="12" height="22" rx="2" fill="#fff"></rect>
                <circle cx="60" cy="46" r="10" fill="#fff" opacity="0.9"></circle>
              </svg>
            </div>
          </div>
        </div>
      </div>

      
    </div>
  </div>
<!--
Graph konten
-->
<footer class="footer py-4  ">
  <div class="container-fluid">
    <div class="row align-items-center justify-content-lg-between">
      <div class="col-lg-6 mb-lg-0 mb-4">
        <div class="copyright text-center text-sm text-muted text-lg-start">
          © <script>
            document.write(new Date().getFullYear())
          </script>,
          made with <i class="fa fa-heart"></i> by
          <a href=" " class="font-weight-bold" target="_blank">ClimBox</a>
          for a better climate.
        </div>
      </div>
      <div class="col-lg-6">
        <ul class="nav nav-footer justify-content-center justify-content-lg-end">
          <li class="nav-item">
            <a href=" " class="nav-link text-muted" target="_blank">Creative Tim</a>
          </li>
          <li class="nav-item">
            <a href=" " class="nav-link text-muted" target="_blank">About Us</a>
          </li>
          <li class="nav-item">
            <a href=" " class="nav-link text-muted" target="_blank">Blog</a>
          </li>
          <li class="nav-item">
            <a href=" " class="nav-link pe-0 text-muted" target="_blank">License</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
  
</footer>
<!--Graph script fetch-->
  <script>
    // override default config (opsional) — ubah sesuai environment
    window.CLIMBOX_CONFIG = {
      BACKEND_BASE_URL: "http://localhost:3000",
      LOCATION_ID: "pulau_komodo",
      POLL_SECONDS: 30 // cek tiap 30 detik
    };
  </script>

  <script src="../assets/js/graph-fetch.js"></script>
  <!--   Core JS Files   -->
  <script src="../assets/js/core/popper.min.js"></script>
  <script src="../assets/js/core/bootstrap.min.js"></script>
  <script src="../assets/js/plugins/perfect-scrollbar.min.js"></script>
  <script src="../assets/js/plugins/smooth-scrollbar.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    var win = navigator.platform.indexOf('Win') > -1;
    if (win && document.querySelector('#sidenav-scrollbar')) {
      var options = {
        damping: '0.5'
      }
      Scrollbar.init(document.querySelector('#sidenav-scrollbar'), options);
    }
  </script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

  <!-- Map script module   -->
       <!-- Leaflet & Chart.js -->
       <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"/>
       <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
       <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module">
      import { graphData } from '../assets/data/graph-map.js';
    
      // Inisialisasi Chart.js (sama seperti sebelumnya)…
      const ctx = document.getElementById('chart').getContext('2d');
  const chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: [], // nanti diisi lewat updateChart
      datasets: [
        {
          label: 'SST',
          data: [],
          borderColor: 'blue',
          fill: false,
        },
        {
          label: 'Heat Stress',
          data: [],
          borderColor: 'orange',
          fill: false,
        },
        {
          label: 'Threshold',
          data: [],
          borderColor: 'red',
          borderDash: [5, 5],
          fill: false,
          pointRadius: 0, // biar titik merah ga kelihatan
        }
      ]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          min: 1,
          max: 40,
          title: {
            display: true,
            text: 'SST (°C)'
          }
        },
        x: {
    ticks: {
      callback: function(value, index, ticks) {
        const date = new Date(this.getLabelForValue(value));
        return `${date.getMonth() + 1}/${date.getDate()}`; // contoh: 8/12
      }
    }
  }
      }
    }
  });
    
function updateChart(data) {
  chart.data.labels = data.map(d => d.date);
  chart.data.datasets[0].data = data.map(d => d.sst);
  chart.data.datasets[1].data = data.map(d => d.heatStress);
  chart.data.datasets[2].data = Array(data.length).fill(30); // garis threshold tetap di 30
  chart.update();
}

    
      // Data lokasi simulasi
      const locations = [
        {
          id: 'Komodo',
          name: 'Pulau Komodo',
          coord: [-8.525, 119.501],
          country: 'Indonesia'
        }
      ];
    
      // Inisialisasi Leaflet
      const map = L.map('map').setView([-8.525,119.501], 6);
      L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{
        attribution:'&copy; OpenStreetMap contributors'
      }).addTo(map);
    
      // Buat marker & event
      locations.forEach(loc => {
        const mk = L.marker(loc.coord).addTo(map);
        mk.bindPopup(`<strong>${loc.name}</strong><br><small>${loc.country}</small>`);
    
        mk.on('click', () => {
          updateChart(graphData);
          renderLocationList(locations);
        });
      });
    
      // Render daftar lokasi
      function renderLocationList(locations) {
  const el = document.getElementById('location-list'); // atau sesuai ID aslinya
  if (!el) return; // kalau nggak ada, langsung keluar
  
  el.innerHTML = ''; // sekarang aman
  locations.forEach(loc => {
    // render item...
  });
}
    
      // Inisialisasi chart & list saat load
      updateChart(graphData);
      renderLocationList(locations);
    </script>
      <script>
        // Initialize the vector map
        var map = new jsVectorMap({
          selector: "#vector-map",
          map: "world_merc",
          zoomOnScroll: false,
          zoomButtons: false,
          selectedMarkers: [1, 3],
          markersSelectable: true,
          markers: [{
              name: "USA",
              coords: [40.71296415909766, -74.00437720027804]
            },
            {
              name: "Germany",
              coords: [51.17661451970939, 10.97947735117339]
            },
            {
              name: "Brazil",
              coords: [-7.596735421549542, -54.781694323779185]
            },
            {
              name: "Russia",
              coords: [62.318222797104276, 89.81564777631716]
            },
            {
              name: "China",
              coords: [22.320178999475512, 114.17161225541399],
              style: {
                fill: '#E91E63'
              }
            }
          ],
          markerStyle: {
            initial: {
              fill: "#e91e63"
            },
            hover: {
              fill: "E91E63"
            },
            selected: {
              fill: "E91E63"
            }
          },
    
    
        });
      </script>
    
  <!-- Github buttons -->
  <script async defer src="https://buttons.github.io/buttons.js"></script>
  <!-- Control Center for Material Dashboard: parallax effects, scripts for the example pages etc -->
  <script src="../assets/js/material-dashboard.min.js?v=3.2.0"></script>

  <script>
  // Aktifkan langsung navbarFixed saat halaman dimuat
  window.addEventListener('DOMContentLoaded', function () {
    const navbar = document.getElementById('navbarBlur');

    if (navbar) {
      // Aktifkan navbar fixed
      navbar.classList.add('position-sticky', 'top-1', 'z-index-sticky');
      navbar.setAttribute('data-scroll', 'true');
    }
  });
  </script>
</body>

</html>